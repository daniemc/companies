(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{64:function(t,e,s){"use strict";s.r(e);var a=s(7),i=s(3),o=s.n(i);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){return void 0===t},c=function(t){return Array.isArray(t)},m=function(t){return t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice};function l(t,e,s,a){if((e=e||{}).indices=!r(e.indices)&&e.indices,e.nullsAsUndefineds=!r(e.nullsAsUndefineds)&&e.nullsAsUndefineds,s=s||new FormData,r(t))return s;if(null===t)e.nullsAsUndefineds||s.append(a,"");else if(c(t))if(t.length)t.forEach((function(t,i){var o=a+"["+(e.indices?i:"")+"]";l(t,e,s,o)}));else{var i=a+"[]";s.append(i,"")}else!function(t){return t instanceof Date}(t)?!function(t){return t===Object(t)}(t)||function(t){return m(t)&&"string"==typeof t.name&&("object"===n(t.lastModifiedDate)||"number"==typeof t.lastModified)}(t)||m(t)?s.append(a,t):Object.keys(t).forEach((function(i){var o=t[i];if(c(o))for(;i.length>2&&i.lastIndexOf("[]")===i.length-2;)i=i.substring(0,i.length-2);l(o,e,s,a?a+"["+i+"]":i)})):s.append(a,t.toISOString());return s}var d={name:"companies-form",props:{inEdition:{type:Boolean,default:!1},data:{type:Object}},data:function(){return{form:new Form({id:"",name:"",email:"",logo:null,website:""})}},watch:{inEdition:function(t,e){t&&!e&&Object.keys(this.$props.data).length>0&&this.setFormData()}},methods:{saveCompany:function(){var t;return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(this.form.post("/company",{transformRequest:[function(t,e){return l(t)}]}));case 2:t=e.sent,200===t.status&&(this.resetForm(),this.$store.dispatch("fetchCompanies",{page:1}),this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:this.$t("messages.success"),text:this.$t("companies-view.messages.saved"),type:"success"}));case 5:case"end":return e.stop()}}),null,this)},updateCompany:function(){var t,e;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.awrap(this.form.put("/company/".concat(this.form.id)));case 2:if(t=s.sent,200!==t.status){s.next=13;break}if(!this.form.logo){s.next=10;break}return s.next=8,o.a.awrap(this.form.post("/company/update/logo",{transformRequest:[function(t,e){return l(t)}]}));case 8:e=s.sent,e.statusLogo;case 10:this.resetForm(),this.$store.dispatch("fetchCompanies",{page:1}),this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:this.$t("messages.success"),text:this.$t("companies-view.messages.updated"),type:"success"});case 13:case"end":return s.stop()}}),null,this)},setFormData:function(){var t=this.$props.data,e=t.id,s=t.name,a=t.email,i=t.website;this.form=new Form({id:e,name:s,email:a,website:i,logo:null})},selectFile:function(t){var e=t.target.files[0];this.form.logo=e},resetForm:function(){$("#modal-companies-form").modal("hide"),this.form.clear(),this.form.reset(),this.form=new Form({id:"",name:"",email:"",logo:null,website:""}),this.$emit("onClearModal")}}},p=s(0),f={name:"companies-view",components:{"companies-form":Object(p.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[t.inEdition?s("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("companies-view.update-company")))]):s("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("companies-view.new-company")))]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.resetForm}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"companyName"}},[t._v(t._s(t.$t("companies-view.company-fields.name")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",id:"companyName",placeholder:t.$t("companies-view.company-fields.name")},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"name"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"companyEmail"}},[t._v(t._s(t.$t("companies-view.company-fields.email")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"email",id:"companyEmail",placeholder:t.$t("companies-view.company-fields.email")},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"companyLogo"}},[t._v(t._s(t.$t("companies-view.company-fields.logo")))]),t._v(" "),s("input",{staticClass:"form-control",class:{"is-invalid":t.form.errors.has("logo")},attrs:{type:"file",id:"companyLogo",placeholder:t.$t("companies-view.company-fields.logo")},on:{change:t.selectFile}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"logo"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"companyWebsite"}},[t._v(t._s(t.$t("companies-view.company-fields.website")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.website,expression:"form.website"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("website")},attrs:{type:"text",id:"companyWebsite",placeholder:t.$t("companies-view.company-fields.website")},domProps:{value:t.form.website},on:{input:function(e){e.target.composing||t.$set(t.form,"website",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"website"}})],1)])]),t._v(" "),s("div",{staticClass:"modal-footer justify-content-between"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.resetForm}},[t._v(t._s(t.$t("commons.close")))]),t._v(" "),t.inEdition?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCompany}},[t._v(t._s(t.$t("commons.update")))]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveCompany}},[t._v(t._s(t.$t("commons.save")))])])])}),[],!1,null,"474bdd61",null).exports},data:function(){return{pageName:this.$t("companies-view.name"),pageBreadCrumb:[{name:this.$t("home-view.name"),active:!1,url:"/home"},{name:this.$t("companies-view.name"),active:!0,url:"/companies"}],inEdition:!1,companyInEdition:{}}},created:function(){this.init()},computed:Object(a.b)({companies:"companies"}),methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("fetchCompanies",{page:t})},editCompany:function(t){this.inEdition=!0,this.companyInEdition=this.companies.data.find((function(e){return e.id===t}))},deleteCompany:function(t){var e=this;axios.delete("/company/".concat(t)).then((function(t){200===t.status&&(e.$store.dispatch("fetchCompanies",{page:1}),e.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:e.$t("messages.success"),text:e.$t("companies-view.messages.deleted"),type:"success"}))}))}}},u=Object(p.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("page-header",{attrs:{pageName:t.pageName,pageBreadCrumb:t.pageBreadCrumb}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-title"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-6"}),t._v(" "),s("div",{staticClass:"col-sm-12 col-md-6 text-right"},[s("button",{staticClass:"btn btn-success btn-md mt-3 mr-4",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-companies-form"},on:{click:function(e){t.companyInEdition={}}}},[s("i",{staticClass:"fas fa-plus"}),t._v("\n                                        "+t._s(t.$t("companies-view.btn-new"))+"\n                                    ")])])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table table-bordered table-hover table-condensed"},[s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v(t._s(t.$t("companies-view.company-fields.name")))]),t._v(" "),s("th",{staticClass:"text-center"},[t._v(t._s(t.$t("companies-view.company-fields.email")))]),t._v(" "),s("th",{staticClass:"text-center"},[t._v(t._s(t.$t("companies-view.company-fields.logo")))]),t._v(" "),s("th",{staticClass:"text-center"},[t._v(t._s(t.$t("companies-view.company-fields.website")))]),t._v(" "),s("th",{staticClass:"text-center"},[t._v(t._s(t.$t("companies-view.company-fields.actions")))])])]),t._v(" "),s("tbody",t._l(t.companies.data,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-center"},[t._v(t._s(e.name))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.email))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.logo))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.website))]),t._v(" "),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-companies-form"},on:{click:function(s){return t.editCompany(e.id)}}},[s("i",{staticClass:"fas fa-edit"})]),t._v(" "),s("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(s){return t.deleteCompany(e.id)}}},[s("i",{staticClass:"fas fa-trash"})])])])})),0)])]),t._v(" "),s("div",{staticClass:"card-footer"},[s("pagination",{attrs:{data:t.companies},on:{"pagination-change-page":t.init}})],1)])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"modal-companies-form"}},[s("div",{staticClass:"modal-dialog"},[s("companies-form",{attrs:{inEdition:t.inEdition,data:t.companyInEdition},on:{onClearModal:function(e){t.inEdition=!1}}})],1)])],1)}),[],!1,null,"39e49084",null);e.default=u.exports}}]);