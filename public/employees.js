(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{65:function(e,t,s){"use strict";s.r(t);var a=s(7),o=s(3),i=s.n(o),n={name:"employees-form",props:{inEdition:{type:Boolean,default:!1},data:{type:Object},companies:{type:Array}},data:function(){return{form:new Form({first_name:"",last_name:"",email:"",phone:"",company_id:""})}},watch:{inEdition:function(e,t){e&&!t&&Object.keys(this.$props.data).length>0&&this.setFormData()}},methods:{saveEmployee:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(this.form.post("/employee"));case 2:e=t.sent,200===e.status&&(this.$store.dispatch("fetchEmployees",{page:1}),this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:this.$t("messages.success"),text:this.$t("employees-view.messages.saved"),type:"success"}));case 5:case"end":return t.stop()}}),null,this)},updateEmployee:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(this.form.put("/employee/".concat(this.form.id)));case 2:e=t.sent,200===e.status&&(this.$store.dispatch("fetchEmployees",{page:1}),this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:this.$t("messages.success"),text:this.$t("employees-view.messages.updated"),type:"success"}));case 5:case"end":return t.stop()}}),null,this)},setFormData:function(){var e=this.$props.data,t=e.id,s=e.first_name,a=e.last_name,o=e.email,i=e.phone,n=e.company_id;this.form=new Form({id:t,first_name:s,last_name:a,email:o,phone:i,company_id:n})},resetForm:function(){$("#modal-employees-form").modal("hide"),this.form.clear(),this.form.reset(),this.form=new Form({first_name:"",last_name:"",email:"",phone:"",company_id:""}),this.$emit("onClearModal")}}},l=s(0),r=Object(l.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[e.inEdition?s("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("employees-view.update-employee")))]):s("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("employees-view.new-employee")))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.resetForm}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),e._v(" "),s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"employeeName"}},[e._v(e._s(e.$t("employees-view.employee-fields.first_name")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("first_name")},attrs:{type:"text",id:"employeeName",placeholder:e.$t("employees-view.employee-fields.first_name")},domProps:{value:e.form.first_name},on:{input:function(t){t.target.composing||e.$set(e.form,"first_name",t.target.value)}}}),e._v(" "),s("has-error",{attrs:{form:e.form,field:"first_name"}})],1),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"employeeLastName"}},[e._v(e._s(e.$t("employees-view.employee-fields.last_name")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.last_name,expression:"form.last_name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("last_name")},attrs:{type:"text",id:"employeeLastName",placeholder:e.$t("employees-view.employee-fields.last_name")},domProps:{value:e.form.last_name},on:{input:function(t){t.target.composing||e.$set(e.form,"last_name",t.target.value)}}}),e._v(" "),s("has-error",{attrs:{form:e.form,field:"last_name"}})],1),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"employeeEmail"}},[e._v(e._s(e.$t("employees-view.employee-fields.email")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"email",id:"employeeEmail",placeholder:e.$t("employees-view.employee-fields.email")},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),s("has-error",{attrs:{form:e.form,field:"email"}})],1),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"employeePhone"}},[e._v(e._s(e.$t("employees-view.employee-fields.phone")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("phone")},attrs:{type:"text",id:"employeePhone",placeholder:e.$t("employees-view.employee-fields.phone")},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}}),e._v(" "),s("has-error",{attrs:{form:e.form,field:"phone"}})],1),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"employeeCompany"}},[e._v(e._s(e.$t("employees-view.employee-fields.company")))]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.form.company_id,expression:"form.company_id"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("company_id")},attrs:{id:"employeeCompany"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"company_id",t.target.multiple?s:s[0])}}},e._l(e.companies,(function(t,a){return s("option",{key:a,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0),e._v(" "),s("has-error",{attrs:{form:e.form,field:"company_id"}})],1)])]),e._v(" "),s("div",{staticClass:"modal-footer justify-content-between"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.resetForm}},[e._v(e._s(e.$t("commons.close")))]),e._v(" "),e.inEdition?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.updateEmployee}},[e._v(e._s(e.$t("commons.update")))]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveEmployee}},[e._v(e._s(e.$t("commons.save")))])])])}),[],!1,null,"257a0016",null).exports,m=s(1),c=s.n(m),p={name:"employees-view",components:{"employees-form":r},data:function(){return{pageName:this.$t("employees-view.name"),pageBreadCrumb:[{name:this.$t("home-view.name"),active:!1,url:"/home"},{name:this.$t("employees-view.name"),active:!0,url:"/employees"}],inEdition:!1,employeeInEdition:{}}},created:function(){this.init()},computed:Object(a.b)({employees:"employees",companies:"allCompanies"}),methods:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("fetchEmployees",{page:e}),this.$store.dispatch("fetchAllCompanies")},editEmployee:function(e){this.inEdition=!0,this.employeeInEdition=this.employees.data.find((function(t){return t.id===e}))},deleteEmployee:function(e){var t=this;c.a.delete("/employee/".concat(e)).then((function(e){200===e.status&&(t.$store.dispatch("fetchEmployees",{page:1}),t.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:t.$t("messages.success"),text:t.$t("employees-view.messages.deleted"),type:"success"}))}))}}},d=Object(l.a)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("page-header",{attrs:{pageName:e.pageName,pageBreadCrumb:e.pageBreadCrumb}}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-title"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-6"}),e._v(" "),s("div",{staticClass:"col-sm-12 col-md-6 text-right"},[s("button",{staticClass:"btn btn-success btn-md mt-3 mr-4",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-employees-form"},on:{click:function(t){e.employeeInEdition={}}}},[s("i",{staticClass:"fas fa-plus"}),e._v("\n                                        "+e._s(e.$t("employees-view.btn-new"))+"\n                                    ")])])])]),e._v(" "),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table table-bordered table-hover table-condensed"},[s("thead",[s("tr",[s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.first_name")))]),e._v(" "),s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.last_name")))]),e._v(" "),s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.email")))]),e._v(" "),s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.phone")))]),e._v(" "),s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.company")))]),e._v(" "),s("th",{staticClass:"text-center"},[e._v(e._s(e.$t("employees-view.employee-fields.actions")))])])]),e._v(" "),s("tbody",e._l(e.employees.data,(function(t,a){return s("tr",{key:a},[s("td",{staticClass:"text-center"},[e._v(e._s(t.first_name))]),e._v(" "),s("td",{staticClass:"text-center"},[e._v(e._s(t.last_name))]),e._v(" "),s("td",{staticClass:"text-center"},[e._v(e._s(t.email))]),e._v(" "),s("td",{staticClass:"text-center"},[e._v(e._s(t.phone))]),e._v(" "),s("td",{staticClass:"text-center"},[e._v(e._s(t.company.name))]),e._v(" "),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal","data-target":"#modal-employees-form"},on:{click:function(s){return e.editEmployee(t.id)}}},[s("i",{staticClass:"fas fa-edit"})]),e._v(" "),s("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(s){return e.deleteEmployee(t.id)}}},[s("i",{staticClass:"fas fa-trash"})])])])})),0)])]),e._v(" "),s("div",{staticClass:"card-footer"},[s("pagination",{attrs:{data:e.employees},on:{"pagination-change-page":e.init}})],1)])])])])]),e._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"modal-employees-form"}},[s("div",{staticClass:"modal-dialog"},[s("employees-form",{attrs:{inEdition:e.inEdition,data:e.employeeInEdition,companies:e.companies},on:{onClearModal:function(t){e.inEdition=!1}}})],1)])],1)}),[],!1,null,"ee653c12",null);t.default=d.exports}}]);